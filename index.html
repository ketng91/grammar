<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Học Grammar - Lớp Anh thầy Kết</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body {
  font-family: Arial, sans-serif;
  background-color: #fff8f0;
  margin: 0;
  padding: 0;
  text-align: center;
}

/* ===== HEADER ===== */
header {
  background-color: #ffd6ba;
  padding: 15px 20px;
  font-weight: bold;
  color: #7a4e3e;
  display: flex;
  flex-wrap: wrap;       
  align-items: center;
  justify-content: space-between;  /* Left luôn bên trái, center căn giữa */
  gap: 15px;
}

/* Left: icon + home text */
.header-left {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 0 0 auto;          /* không bị co lại */
}

.header-left a {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 24px;
  color: #7a4e3e;
  text-decoration: none;
}

.header-left a i {
  font-size: 28px;
}
/* Center title */
header {
  position: relative;
}

.header-center {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
  font-size: 32px;
  margin: 0;
  white-space: nowrap;
}

/* TOP SELECT */
.top-select { display: flex; justify-content: center; margin: 20px; }
select {
  padding: 8px 14px;
  font-size: 18px;
  border-radius: 8px;
  border: 2px solid #a0e7e5;
  background-color: #e3fdfd;
}

/* Grammar box */
.grammar-box {
  width: 85%;
  margin: 20px auto;
  background-color: #d0f0fd;  /* xanh nhạt */
  border-radius: 10px;
  padding: 20px;
  text-align: left;
  font-size: 20px;
  line-height: 1.6;
}

/* ===== Khung xem Google Drive ===== */
.drive-box {
  width: 90%;
  margin: 20px auto;
  background-color: #d0e7ff;  /* màu xanh nhạt */
  border-radius: 12px;
  padding: 10px;
}
.drive-box iframe {
  width: 100%;
  height: 500px;
  border-radius: 10px;
}

/* Bài tập điền từ */
.section-title { font-size: 26px; font-weight: bold; margin: 20px 0 10px 0; }
.exercise, .translation-exercise { width: 80%; margin: 0 auto 30px auto; font-size: 22px; text-align: left; }
.exercise input, .translation-exercise input {
  width: 220px;
  font-size: 20px;
  padding: 5px;
  margin-left: 10px;
  border-radius: 6px;
}
.exercise button, .translation-exercise button {
  margin-left: 10px;
  padding: 6px 12px;
  font-size: 18px;
  background-color: #a0e7e5;
  border-radius: 8px;
  border: none;
  cursor: pointer;
}
.exercise button:hover, .translation-exercise button:hover { background-color: #ffb3ba; }
.result { font-weight: bold; color: #C5705D; font-size: 20px; margin-left: 10px; }

/* ===== VẬN DỤNG VIẾT CÂU ===== */
.sentence-box {
  background-color: #ffe0f0; 
  border: 2px solid #ffb3d9;
  border-radius: 12px;
  padding: 15px 20px;
  font-size: 25px;
  text-align: center;
  margin: 20px auto;
  width: 70%;
}
.input-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  justify-content: flex-start; /* vẫn căn lề trái */
  flex-wrap: wrap;
  margin-left: 140px; /* dịch vào từ lề trái */
}

.input-row input {
  padding: 6px;
  width: 300px; /* cố định chiều rộng */
  font-size: 22px;
  border: 1px solid #ccc;
  border-radius: 4px;
  flex-shrink: 0; /* không bị co lại */
}

.input-row button {
  width: 100px; /* cố định button */
  padding: 6px 10px;
  font-size: 18px;
  flex-shrink: 0;
}

.input-row .result {
  min-width: 120px; /* khung hiển thị kết quả cố định */
  display: inline-block;
}
.arrow-icon { font-size: 18px; font-weight: bold; }
.correct { color: green; font-weight: bold; font-size: 18px; }
.wrong { color: red; font-weight: bold; font-size: 18px; }

.full-answer-box { width: 95%; max-width: 100%; height: 100px; padding: 8px; font-size: 25px; color: blue; border-radius: 10px; border: 5px solid #ccc; box-sizing: border-box; }
.full-submit { padding: 10px 12px; margin-top: 10px; }

button { padding: 8px 0; margin-right: 10px; cursor: pointer; border-radius: 5px; border: none; background-color: #a0e7e5; font-size: 16px; width: 140px; transition: background-color 0.25s ease, transform 0.2s ease; }
button:hover, button:active { background-color: #ffb3ba; transform: translateY(-2px); }

.signature { font-size: 18px; font-style: italic; font-weight: bold; color: #004aad; text-align: right; margin-top: -25px; }

.confetti { position: fixed; top: 50%; left: 50%; width: 10px; height: 10px; background: red; opacity: 0.9; animation: pop 900ms ease-out forwards; }
@keyframes pop { 0%{transform:translate(0,0) scale(1);opacity:1;}50%{transform:translate(calc(var(--x)*0.5),calc(var(--y)*0.4)) scale(1.1);opacity:1;}100%{transform:translate(var(--x),var(--y)) scale(0.5);opacity:0;} }

@media(max-width:480px){
   .header-center {
    flex-basis: 100%;
    order: 2;
    text-align: center;
    position: static;
    transform: none;
    margin-top: 8px;
  }

  .header-left {
    order: 1;
  }
}

  header {
    padding: 10px 15px;
  }
  .header-left a {
    font-size: 18px;
  }
  .header-left a i {
    font-size: 20px;
  }
  .header-center {
    font-size: 22px;
  }
}



  body{margin:10px;padding:10px;}
  .sentence-box{font-size:18px;width:90%;}
  .full-answer-box{width:100%;font-size:16px;height:80px;}
  button{width:140px;font-size:14px;margin-bottom:5px;}
}
</style>
</head>

<body>

<header>
  <div class="header-left">
    <a href="https://ketng91.github.io/lopanhthayket/">
      <i class="fa-solid fa-house"></i>
    </a>
    <span class="header-text">Lớp Anh thầy Kết</span>
  </div>
  <div class="header-center">Khoá Grammar</div>
</header>

<!-- Chọn topic -->
<div class="top-select">
  <select id="topicSelect"></select>
</div>

<!-- Lý thuyết -->
<div class="grammar-box" id="grammarContainer"></div>

<!-- Khung Google Drive -->
<div class="drive-box">
  <iframe id="driveFrame" src="" frameborder="0" allowfullscreen></iframe>
</div>

<!-- Bài tập điền từ -->
<div class="section-title">Bài tập điền từ</div>
<div class="exercise" id="exercise"></div>

<!-- Bài tập dịch câu -->
<div class="section-title">Bài tập dịch câu</div>
<div class="sentence-box" id="vnSentence"></div>
<div id="inputs"></div>
<textarea id="fullAnswer" class="full-answer-box" placeholder="Nhập câu dịch tiếng Anh..."></textarea><br>
<button id="submitBtn" class="full-submit">Submit</button>
<button id="changeBtn">Next sentence</button>
<div id="fullResult"></div>

<div class="signature">Lớp Anh thầy Kết</div>

<script>




/* ===== DATA ===== */
const grammarData = {
  "MĐQH": "MĐQH-MĐQH rút gọn",
};




const driveLinks = {
  "MĐQH": "https://docs.google.com/document/d/1c3aJf7_Gioxha_NpwOJW5d8Crfo07V5y/preview",
};






const exercises = {
  "MĐQH":[
  {q: "The scientist _____ won the Nobel Prize is giving a lecture today.", a: "who"},
  {q: "The house _____ roof was damaged in the storm has been repaired.", a: "whose"},
  {q: "The candidates _____ we interviewed yesterday were all very well-qualified.", a: ["who", "whom"]},
  {q: "Sustainable energy, _____ is becoming more affordable, helps reduce carbon emissions.", a: "which"},
  {q: "I am looking for a colleague _____ specializes in environmental law.", a: "who"},
  {q: "The city _____ I grew up in has changed significantly over the last decade.", a: "which"},
  {q: "Students _____ assignments are submitted late will lose 10% of their grade.", a: "whose"},
  {q: "This is the most innovative solution _____ has been proposed so far.", a: "that"},
  {q: "The person to _____ you should send the application is the HR Manager.", a: "whom"},
  {q: "Electric cars, _____ produce zero tailpipe emissions, are key to cleaner air.", a: "which"}
  ],






};

const dataByTopic = {
  "MĐQH":[
    {vn:"Tôi ăn sáng mỗi ngày.", parts:[{vn:"Tôi", en:"I", color:"green"},{vn:"ăn sáng", en:"eat breakfast", color:"blue"}], full:"I eat breakfast every day."},
    {vn:"Họ đang chơi bóng đá.", parts:[{vn:"Họ", en:"They", color:"green"},{vn:"đang chơi bóng đá", en:"are playing football", color:"blue"}], full:"They are playing football."}
  ],
};

let currentTopic = Object.keys(dataByTopic)[0];
let currentIndex = 0;

/* ===== INIT SELECT ===== */
const topicSelect = document.getElementById("topicSelect");
Object.keys(dataByTopic).sort().forEach(topic=>{
  const opt=document.createElement("option"); opt.value=topic; opt.textContent=topic;
  topicSelect.appendChild(opt);
});
topicSelect.value = currentTopic;

/* ===== LOAD CONTENT ===== */
function loadContent(){
  // Grammar
  document.getElementById("grammarContainer").innerText = grammarData[currentTopic];
  document.getElementById("driveFrame").src = driveLinks[currentTopic] || "";

  // Bài tập điền từ
  const box=document.getElementById("exercise");
  box.innerHTML="";
  exercises[currentTopic].forEach((item,i)=>{
    box.innerHTML+=`<div style="margin:10px 0;">${i+1}. ${item.q} <input id="ex${i}"><button onclick="checkEx(${i})">Check</button><span id="resEx${i}" class="result"></span></div>`;
  });

  // Bài tập dịch câu
  loadWriting();
}

/* ===== CHECK EXERCISE ===== */
function checkEx(i){
  const user = document.getElementById("ex"+i).value.trim().toLowerCase();
  const ans = exercises[currentTopic][i].a; // có thể là string hoặc array
  const box = document.getElementById("resEx"+i);

  if(Array.isArray(ans)){
    const found = ans.some(a => a.toLowerCase() === user);
    box.innerHTML = found 
      ? '<span style="color:green;font-weight:bold;">✔ Correct</span>' 
      : '<span style="color:red;font-weight:bold;">✘ ' + ans.join(" / ") + '</span>';
  } else {
    box.innerHTML = user === ans.toLowerCase() 
      ? '<span style="color:green;font-weight:bold;">✔ Correct</span>' 
      : '<span style="color:red;font-weight:bold;">✘ ' + ans + '</span>';
  }
}

/* ===== LOAD VIẾT CÂU ===== */
function loadWriting(){
  const item = dataByTopic[currentTopic][currentIndex];
  document.getElementById("vnSentence").innerHTML = item.vn;

  const container = document.getElementById("inputs"); container.innerHTML="";
  item.parts.forEach((p,idx)=>{
    const first=p.en[0], wc=p.en.split(" ").length;
    const hint = `${p.vn} (${first}... ; ${wc} word${wc>1?'s':''})`;
    const row = document.createElement("div");
    row.className="input-row";
    row.innerHTML=`<span class="arrow-icon" style="color:${p.color};">➤</span><input id="box${idx}" placeholder="${hint}"><button onclick="checkWord(${idx})">Check</button><span id="resWord${idx}" class="result"></span>`;
    container.appendChild(row);
    row.querySelector("input").addEventListener("keydown",(e)=>{if(e.key==="Enter"){e.preventDefault(); checkWord(idx);}});
  });

  document.getElementById("fullAnswer").value=""; 
  document.getElementById("fullResult").innerHTML="";
}

/* ===== CHECK WORD ===== */
window.checkWord = function(i){
  const item = dataByTopic[currentTopic][currentIndex];
  const user=document.getElementById("box"+i).value.trim();
  const key=item.parts[i].en; 
  const res=document.getElementById("resWord"+i);
  res.innerHTML = user.toLowerCase()===key.toLowerCase() 
    ? '<span style="color:green;font-weight:bold;">✔ Correct</span>' 
    : '<span style="color:red;font-weight:bold;">✘ ' + key + '</span>';
}

/* ===== CHECK FULL SENTENCE ===== */
document.getElementById("submitBtn").onclick=()=>{
  const item = dataByTopic[currentTopic][currentIndex];
  const user=document.getElementById("fullAnswer").value.trim();
  const res=document.getElementById("fullResult");
  if(user.toLowerCase()===item.full.toLowerCase()){res.innerHTML='<span class="correct">✔ Correct</span>'; firework();}
  else{res.innerHTML=`<span class="wrong">✘ ${item.full}</span>`;}
}

/* ===== NEXT SENTENCE ===== */
document.getElementById("changeBtn").onclick=()=>{
  const topicData = dataByTopic[currentTopic];
  currentIndex = (currentIndex+1)%topicData.length;
  loadWriting();
}

/* ===== SELECT TOPIC ===== */
topicSelect.addEventListener("change",(e)=>{
  currentTopic = e.target.value; currentIndex=0; loadContent();
});

/* ===== ENTER SUBMIT ===== */
document.getElementById("fullAnswer").addEventListener("keydown",(e)=>{
  if(e.key==="Enter"){e.preventDefault(); document.getElementById("submitBtn").click();}
});

/* ===== PHÁO HOA ===== */
function firework(){
  for(let i=0;i<25;i++){
    const conf=document.createElement("div");
    conf.className="confetti";
    conf.style.setProperty("--x",(Math.random()-.5)*600+"px");
    conf.style.setProperty("--y",(Math.random()-.5)*600+"px");
    conf.style.backgroundColor=`hsl(${Math.random()*360},90%,60%)`;
    document.body.appendChild(conf);
    setTimeout(()=>conf.remove(),900);
  }
}

/* ===== LOAD INIT ===== */
loadContent();
</script>
</body>
</html>
